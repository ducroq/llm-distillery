# Uplifting Content Filter - Version 5.0
# Orthogonal dimension framework inspired by sustainability_technology LCSA
# Fixes v4 correlation issues (agency/progress/collective_benefit correlated at 0.94-0.97)

filter:
  name: uplifting
  version: "5.0"
  created: "2025-11-29"
  description: "Rate content for uplifting value using orthogonal impact and assessment dimensions"
  focus: "DOCUMENTED OUTCOMES for human/planetary wellbeing, not emotional tone or speculation"

  changelog_v5: |
    Complete dimension redesign to fix high correlations in v4.
    v4 had agency/progress/collective_benefit correlating at 0.94-0.97.
    v5 splits into orthogonal dimensions:
    - 3 Impact Domains (WHAT kind of uplift): Human Wellbeing, Social Cohesion, Justice & Rights
    - 3 Assessment Dimensions (HOW real/accessible): Evidence Level, Benefit Distribution, Change Durability
    Inspired by sustainability_technology LCSA framework structure.

prefilter:
  enabled: true
  expected_pass_rate: ~0.20  # Estimated 20% of random articles
  description: "Blocks corporate finance, military buildups, and pure speculation without outcomes"

oracle:
  recommended: gemini-flash
  candidates:
    - gemini-flash
    - gemini-pro
    - claude-sonnet
  target_model: "Gemini Flash 2.0 / Claude Haiku"

scoring:
  dimensions:
    # === IMPACT DOMAINS (WHAT kind of uplift) ===

    human_wellbeing_impact:
      weight: 0.25
      category: impact_domain
      description: "Improvement in health, safety, livelihoods, or basic needs"
      scale: |
        0-2: No wellbeing impact or harm documented
        3-4: Minor/indirect wellbeing benefit
        5-6: Moderate wellbeing improvement for identifiable group
        7-8: Significant wellbeing improvement with measurable outcomes
        9-10: Transformative wellbeing change (lives saved, poverty lifted, health restored)
      evidence_focus: "Health metrics, safety improvements, livelihood gains, basic needs met"

    social_cohesion_impact:
      weight: 0.15
      category: impact_domain
      description: "Communities strengthened, solidarity built, connections across groups"
      scale: |
        0-2: No social impact or division/isolation
        3-4: Limited connection within existing groups
        5-6: Moderate community building or cross-group collaboration
        7-8: Strong solidarity, mutual aid networks, inclusive coalitions
        9-10: Transformative social bonds across divides (class, race, nation)
      evidence_focus: "Collaboration examples, mutual aid, coalition building, community events"

    justice_rights_impact:
      weight: 0.10
      category: impact_domain
      description: "Wrongs addressed, accountability achieved, rights expanded"
      scale: |
        0-2: No justice/rights dimension
        3-4: Problem documented but no action
        5-6: Initial accountability or rights advocacy
        7-8: Significant justice achieved (ruling, reparation, policy change)
        9-10: Landmark justice (systemic accountability, rights breakthrough)
      evidence_focus: "Court rulings, policy changes, accountability actions, rights expansions"

    # === ASSESSMENT DIMENSIONS (HOW real/accessible) ===

    evidence_level:
      weight: 0.20
      category: assessment
      description: "How verified are the claimed outcomes?"
      gatekeeper: true
      gatekeeper_threshold: 3
      gatekeeper_max_score: 3.0
      scale: |
        0-2: Pure speculation ("could", "might", "promises to", "aims to")
        3-4: Claims made but limited evidence (announcements, intentions)
        5-6: Documented outcomes with some data (numbers cited, sources mentioned)
        7-8: Well-documented with verifiable data (studies, official records, multiple sources)
        9-10: Independently verified/replicated outcomes (peer review, third-party audit)
      evidence_focus: "Data citations, source quality, verification level, outcome documentation"

    benefit_distribution:
      weight: 0.20
      category: assessment
      description: "Who benefits? How accessible is the benefit?"
      scale: |
        0-2: Elite only (billionaires, executives, shareholders)
        3-4: Limited group (professionals, paying customers, single community)
        5-6: Moderate reach (regional, specific demographic, subsidized access)
        7-8: Broad accessibility (free/affordable, multiple communities, national)
        9-10: Universal benefit (global commons, freely shared, structural inclusion)
      evidence_focus: "Who benefits, access barriers, pricing, geographic reach"

    change_durability:
      weight: 0.10
      category: assessment
      description: "How lasting is the change?"
      scale: |
        0-2: One-time event or temporary relief
        3-4: Short-term improvement (months)
        5-6: Sustained change (years) but reversible
        7-8: Durable structural change (institutions, infrastructure, rights)
        9-10: Permanent/self-sustaining transformation (systemic, generational)
      evidence_focus: "Timeframe mentioned, structural vs symptomatic, sustainability indicators"

  tiers:
    high:
      threshold: 7.0
      description: "Verified, broadly beneficial, lasting positive change"

    medium:
      threshold: 4.0
      description: "Documented benefits with moderate reach or durability"

    low:
      threshold: 0.0
      description: "Speculation, elite-only benefits, or no documented wellbeing impact"

  gatekeepers:
    evidence_gatekeeper:
      dimension: evidence_level
      threshold: 3
      max_score: 3.0
      reason: "Speculation without documented outcomes cannot be truly uplifting"

  content_type_caps:
    corporate_finance:
      max_score: 2.0
      triggers:
        - "Stock prices, earnings, funding rounds, valuations, M&A, IPO"
      exceptions:
        - "worker cooperative"
        - "public benefit corporation"
        - "open source"
        - "community ownership"

    military_security:
      max_score: 4.0
      triggers:
        - "Military buildup, defense spending, weapons, armed forces deployment"
      exceptions:
        - "demilitarization"
        - "peace process"
        - "conflict resolution"
        - "disarmament"

    pure_speculation:
      max_score: 3.0
      triggers:
        - "Article primarily uses 'could', 'might', 'may', 'promises to', 'aims to'"
      exceptions:
        - "documented pilot results"
        - "verified early outcomes"

preprocessing:
  # Head+tail extraction: keeps first N + last M tokens, discards middle
  # Improves MAE (0.655 vs 0.680 baseline) by capturing intro and conclusion
  # Enable when deploying model trained with --use-head-tail flag
  head_tail:
    enabled: true  # Head+tail trained model deployed
    head_tokens: 256
    tail_tokens: 256
    separator: " [...] "

training:
  target_samples: 5000
  train_val_test_split: [0.8, 0.1, 0.1]
  quality_threshold: 0.7
  recommended_model: "Qwen2.5-1.5B"
  expected_mae: "<1.0 per dimension"

hybrid_inference:
  stage1:
    embedding_model: "intfloat/multilingual-e5-small"
    probe_path: "probe/embedding_probe_e5small.pkl"
    threshold: 4.5  # 2.09x on MEDIUM-heavy data, ~2.5-3x expected in production
  stage2:
    model: "current"  # Uses existing inference.py UpliftingScorer

deployment:
  inference_time: "20-50ms"
  inference_time_hybrid: "~14ms avg"
  cost_per_article: "$0.00"
  use_cases:
    - "Positive news aggregation"
    - "Solutions journalism curation"
    - "Progress tracking dashboards"
